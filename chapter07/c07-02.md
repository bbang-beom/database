## 02 함수 종속성
1. 함수 종속성의 개념
- 정규화: 이상 현상이 발생하는 테이블을 수정하여 정상으로 만드는 과정

    정규화를 하기 위해 먼저 테이블을 분석하여 기본키와 함수 종속성을 파악해야한다.
- 다음은 madang대학의 학생 정보와 수강 정보를 저장하는 학생수강성적 릴레이션이다.

학생번호 | 학생이름  | 주소 | 학과 | 학과사무실 | 강좌이름 | 강의실 | 성적
--------|----------|----- |------|-----------|---------|--------|----
501     |  박지성   | 영국 맨체스터     | 컴퓨터과 | 공학관 110     | 데이터베이스  | 공학관 110 | 3.5
401     |  김연아   |대한민국 서울      |  체육학과 | 공학관 110    | 데이터베이스  | 공학관 110 | 4.0
402     |  장미란   |대한민국 강원도    | 체육학과 |  체육관 101    | 스포츠경영학  | 체육관 103 | 3.5
502     |  추신수   | 미국 클리블랜드   | 컴퓨터과 |  공학관 101    | 자료구조      | 공학관 111 | 4.0
501     |  박지성   |  영국 맨체스터    | 컴퓨터과|  공학관 110     | 자료구조      | 공학관 111 | 3.5

- 학생수강성적 릴레이션의 각 속성 사이에는 의존성이 존재한다. 예를 들어 강좌이름이 데이터베이스인 경우
강의실은 공학관 110호 뿐이다. 반면, 이름이 박지성인 경우 강좌이름이 데이터베이스, 자료구조 2개이다.
강의실은 강좌이름만 알면 바로 알 수 있지만 강좌이름은 학생이름만으로 알 수 없다.
- 이처럼 어떤 속성 A의 값을 알면 다른 속성 B의 값이 유일하게 정해지는 의존 관계를 "속성 B는 속성 A에 종속한다. 혹은 속성 A는 속성 B를 결정한다." 라고한다. 이 관계를 A -> B로 표기하며, A는 B의 결정자라고 한다.
- 학생수강성적 릴레이션에서 종속관계에 있는 예
    - 학생번호 -> 학생이름
    - 학생번호 -> 주소
    - 강좌이름 -> 강의실
    - 학과 -> 학과사무실
- 종속하지 않는 예
    - 학생이름 -> 강좌이름
    - 학과 -> 학과번호
- 종속하는 것 처럼 보이지만 그렇지 않은 예
    - 학생이름 -> 학과
- 현재 상태에서는 학생이름을 알면 학과를 알 수 있지만, 동명이인이 있으면 학생이름만으로 학과를 알 순 없다.
함수 종속성을 판단할 때는 릴레이션의 현재 인스턴스(데이터)만을 가지고 판단하는 것이 아니라 속성이 갖는 의미를 가지고 판단해야 한다.
- 학생번호 -> 주소와 같이 왼쪽 속성이 모든 값에 대하여 오른쪽 속성의 값이 유일하게 결정될 때 "함수적으로 종속한다." 라고 한다. 릴레이션의 속성 간에 함수적으로 종속하는 성질을 함수 종속성 혹은 함수적 종속성(functional dependency)라고 한다.

2. 함수 종속성과 기본키
- 릴레이션의 함수 종속성을 파악하기 위해 우선 기본키를 찾아야 한다. 기본키가 함수 종속성에서 어떤 역할을 하는지 알면 이상현상을 제거하는 정규화 과정을 쉽게 이해할 수 있다.
- 릴레이션R(k, A1, A2, A3, ..., An)에서 k가 기본키이면 k->R이 성립 즉, 기본키는 릴레이션의 모든 속성에 대한 결정자이다.
- 학생 릴레이션을 예로 들면, 이름이 같은 학생이 없으면, 이름 -> 학과, 이름 -> 주소, 이름 -> 취득학점 이므로
이름이 모든 속성에 대한 결정자이다.

    학생
    이름  |  학과     | 주소           | 취득학점
    ----  | ---------| -----------    | ---
    박지성 | 컴퓨터과 | 영국 맨체스터    | 92
    김연아 | 체육학과 | 대한민국 서울    | 95
    장미란 | 체육학과 | 대한민국 강원도  | 98
    추신수 | 컴퓨터과 | 미국 클리블랜드  | 99

5. 이상현상과 결정자
- 이상현상은 하나의 릴레이션에 두 개 이상의 정보가 포함되어 있을 때 나타난다. 학생수강성적 릴레이션의 경우
학생 정보와 강좌 정보가 한 릴레이션에 포함되어 있기 때문에 이상현상이 나타난다.
- 학생수강성적 릴레이션에서 부분 릴레이션을 분해할 때 부분 릴레이션의 결정자는 원래 릴레이션에 남겨 두어야 한다. 그래야 분해된 부분 릴레이션이 원래 릴레이션과 관계를 형성할 수 있다.
    - 1단계: 학생수강성적 릴레이션에서 (강좌이름, 강의실)을 분리
        - 학생수강성적 1(학생번호, 학생이름, 학과, 주소, 강좌이름, 성적, 학과 사무실)
            - 강의실(강좌이름, 강의실)
    - 2단계: 학생수강성적 1 릴레이션에서 (학생번호, 강좌이름, 성적)을 분리
        - 학생학과(학생번호, 학생이름, 학과, 주소, 학과사무실)
        - 학생성적(학생번호, 강좌이름, 성적)
        - 강의실(강좌이름, 강의실)
    - 3단계: 학생학과 릴레이션에서(학과, 학과사무실)을 분리
        - 학생(학생번호, 학생이름, 학과, 주소)
        - 학과(학과, 학과사무실)
        - 학생성적(학생번호, 강좌이름, 성적)
        - 강의실(강좌이름, 강의실)