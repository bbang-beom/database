--

# chapter07 정규화
## 01 이상현상
1. 이상현상의 개념
- 잘못 설계된 테이블로, 삽입, 삭제, 수정 같은 데이터 조작을 하면 이상현상이 일어난다.
이상현상: 테이블에 투플을 삽입할 때 부득이하게 null값이 입력되거나, 삭제 시 연쇄삭제
현상이 발생하거나, 수정 시 데이터의 일관성이 훼손되는 현상

2. 이상현상의 예
- 학생수강 테이블

    학생번호 | 학생 이름 | 학과    | 주소   | 강좌 이름 | 강의실
    --------|----------|---------|---------|---------|--------
    501     |  박지성    | 컴퓨터과 | 영국 맨체스터     |  데이터베이스  | 공학관 110
    401     |  김연아    | 체육학과 | 대한민국 서울     |  데이터베이스  | 공학관 110
    402     |  장미란    | 체육학과 | 대한민국 강원도   |  스포츠경영학  | 체육관 103
    502     |  추신수    | 컴퓨터과 | 미국 클리블랜드   |  자료구조      | 공학관 111
    501     |  박지성    | 컴퓨터과 |  영국 맨체스터    |  자료구조      | 공학관 111


- 학생수강 테이블에서 필요한 정보를 찾을 때는 문제가 없다. 그러나 삭제, 삽입, 수정 등 테이블에
저장된 내용을 조작할 때 문제가 발생한다.

- 삭제이상
    - 장미란 학생이 스포츠경영학 과목을 수강 취소하여 delete문으로 세 번째 투플을 삭제하였다.
    그런데 삭제 후 장미란 학생의 학생번호, 학과, 주소정보가 없어졌다. 스포츠경영학 수강을 취소하려 했던 의도는 달성되었지만, 장미란 학생의 기본정보가 없어졌다.
    삭제이상(deletion anomaly)이란 투플 삭제 시 같이 저장된 다른 정보까지 연쇄적으로 삭제되는 현상이다. -> 연쇄삭제 문제 발생
- 삽입이상
    - 박세리 학생이 체육학과에 입학하여  insert문으로(학생번호, 학생이름, 학과, 주소) 정보를 삽입했다. 그런데 아직 수강신청은 하지 않은 상태라(강좌이름, 강의실) 속성에는 null값을 입력하였다. 여기서 null값은 특별한 값으로 테이블에는 최대한 없어야한다. 삽입이상(insertion anomaly)이란 투플 삽입 시 특정 속성에 해당하는 값이 없어 null 값을 입력해야 하는 현상이다.
    ->null 값 문제 발생
- 수정이상
    - 박지성 학생의 주소가 대한민국 서울로 바뀌었다. 보통 update문으로 주소를 수정할 경우 두 군데 모두 바뀌지만, 만약 한 군데만 바뀐다면 문제가된다. select문으로 조회했을 때 서로 다른 주소 값이
    조회되어 데이터의 일관성이 깨지는 불일치 문제가 발생하기 때문이다. 수정이상(update anomaly)이란
    투플 수정 시 중복으로 저장된 데이터 일부만 수정되어 데이터의 불일치 문제가 일어나는 현상이다.
    -> 일관성 문제 발생

- 수정된 계절학기 수강 테이블
    - 테이블의 구조를 수정하여 이상현상이 발생하지 않도록 테이블 생성
    summer 테이블은 summerprice와 summerenroll테이블로 분리
    summerprice 테이블은 과목에 대한 수강료 정보 저장
    summerenroll 테이블은 학생들의 수강신청 정보 저장

Summer(sid, class, price)
sid     | class      | price
---     | ---        | ---
100     | java       | 20000
150     | database   | 15000
200     | html5      | 10000
250     | javascript | 20000
300     | javascript | 20000

- summer 테이블의 분리

SummerPrice(<u>class</u>, price)
class       | price
---         | ---
java        | 20000
html5       | 10000
database    | 15000
javascript  | 20000

SummerEnroll(sid, class)
sid     | class
---     | ---
100     | java
150     | database
200     | html5
250     | javascript
300     | javascript

