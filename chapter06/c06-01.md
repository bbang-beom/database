# chapter06 데이터 모델링
## 01 데이터 모델링의 개념
### 1. 데이터 모델링의 중요성
- 데이터 모델링을 잘못하면 프로젝트 전체가 위험에 빠질 수 있다.
소프트웨어 개발이 끝날 때 쯤에야 모델링이 잘못된 것을 발견하면 많은 수정을 진행해야 할 수 도 있다.

### 2. 데이터베이스 생명주기
- 데이터베이스는 최소 사용자의 요구에 의해 구축되어 사용되다가 필요에 따라 개선 또는 다시 구축되어 사용된다.
이러한 데이터베이스의 생성과 운영에 관련된 특징을 데이터베이스 생명주기(database life cycle)라고 한다.
    1. 요구 사항 수집 및 분석
        - 사용자들의 요구사항을 듣고 분석하여 데이터베이스 구축의 범위 설정
        ex. madang 서점-> 고객, 경영자, 사용자의 범위와 서비스 수준 결정
    2. 설계
        - 분석된 요구사항을 기초로 주요 개념과 업무 프로세스 등을 식별하고(개념적 설계),
         사용하는 DBMS의 종류에 맞게 변환(논리적 설계)힌 후, 데이터베이스 스키마를 도출(물리적 설계)한다.
    3. 구현
    - 설계 단계에서 생성한 스키마를 실제 DBMS에 적용하여 테이블 및 관련 객체(뷰, index등)를 만든다.
    또. 관련 소프트웨어에 설계한 데이터베이스를 적용하여 서비스를 제공할 수 있도록 프로그램을 완성한다.
    4. 운영
        - 구현된 데이터베이스를 기반으로 소프트웨어를 구축하여 서비스를 제공
    5. 감시 및 개선
    - 데이터베이스 운영에 따른 시스템의 문제를 관찰하고 데이터베이스 자체의 문제점을 파악하여 개선,
    데이터베이스가 지속적으로 운영될 수 있도록 변경 및 유지보수

### 3. 데이터 모델링 과정
- 데이터베이스 생명주기는 데이터베이스의 구축-사용-개선-재구축의 순환과정으로 이루어진다. 데이터 모델링은 데이터베이스
생명주기 중 요구사항 수집 및 분석부터 설계까지의 과정을 말한다. 요구사항 수집 및 분석 단계에서 현실 세계의 대상 데이터 및
사용자 요구사항을 정리하고 분석한다. 설계 단계에서는 중요 개념을 구분한 후 (개념적 모델링) 각 개념을 구체화하고(논리적 모델링)
최종적으로 데이터베이스 생성계획에 따라 개체, 인덱스 등을 생성(물리적 모델링)한다.
    - 요구사항 수집 및 분석
        - 데이터베이스 구축을 위한 첫 단계, 현실 세계를 파악하고 사용자의 요구사항을 수집 및 분석하는 단계
        앞으로의 진행 방향이 이 단계에서 결정되므로 매우 중요하다. 담당자는 구축할 데이터베이스와 관련된
        전문적인 지식을 갖추고 있어야 하며, 관련 자료를 수집할 때도 가장 기초적인 내용에 중점을 두고 진행해야 한다.
        일반적으로 요구 사항 수집을 위해 다음과 같은 방법이 많이 사용된다.
        1. 실제 문서를 수집, 분석
            - 문서의 기록으로 남기기 위해 만드는 자료이기에 데이터베이스로 관리할 우선 대상일 가능성이 가장 크다.
        2. 담당자와 인터뷰나 설문조사를 통해 요구사항 직접 수렴
            - 실제로 데이터베이스를 사용할 담당자에게 직접 요구사항을 수렴하는 방법, 이 때 담당자와 분석가 사이에
            의사소통이 원할하게 이루어지지 않으면 잘못된 요구사항이 수집되어 결과적으로 잘못된 데이터베이스를 설계할 수 있다.
            그러므로 분석가는 담당자의 의도를 정확하게 파악하도록 노력해야 한다.
        분석가가 해당 업무에 대해 전문적인 지식이 없다면, 하나씩 배운다는 생각으로 인터뷰하는 것도 좋은 방법
        3. 비슷한 업무를 처리하는 기존의 데이터베이스 분석
            - 구축하려는 데이터베이스와 유사한 시스템이 있다면 그 시스템을 참고하여 요구사항 파악
        4. 각 업무와 연관된 모든 부문을 살펴본다.
            - 일반적으로 한가지 업무가 단독으로 처리되는 경우는 드물다.
            대부분 서로 연관성을 가직고 처리되므로 처리하려는 업무나 대상의 전체를 보면서 요구사항을 수집 및 분석한다.
    - 사용자 요구사항은 대부분 모호하며 사용자마다 쓰는 용어도 달라 개념을 명확하게 파악하기 어렵다. 
    수집된 자료는 이러한 모호성을 제거하고 최대한 구체적이고 명확하게 정리해야 한다. 또, 분석 과정을 거쳐 필요로 하는
    정보와 업무 처리 절차를 도출하여 다음 단계에서 활용할 수 있도록 한다.

    - 개념적 모델링
        - 개념적 모델링은 요구사항을 수집하고 분석환 결과를 토대로 업무의 핵심적인 개념을 구분하고 전체적인 뼈대를 만드는 과정
        핵심적인 개념을 구분한다는 것은 개체를 추출하고 각 개체 간의 개체를 추출하고 각 개체 간의 관계를 정의하여 
        ER다이어그램을 만드는 과정까지를 말한다. 요약하면, 개체는 구체적으로 표현할 수 있느 실체이며, ER다이어그램은 이러한 실체들의
        관계를 표현한 것이다. 설계자는 사용자의 요구사항을 분석하여 가장 핵심적인 개체와 개별 개체를 식별할 수 있는 핵심 속성(PK),
        그리고 각 개체 간의 관계를 정의하여 데이터베이스화 할 수 있는 일반적인 개념으로 표현한다.
    -  논리적 모델링
        - 논리적 모델링은 개념적 모델링에서 만든 ER다이어그램을 사용하고자하는 DBMS에 맞게 매핑(mapping)하여 
        실제 데이터베이스로 구현하기 위한 모델을 만드는 과정이다.
            - 논리적 모델링은 몇 가지 과정을 거쳐 완성된다.
                1. 개념적 모델링에서 핵심적인 속성만 추출하였다면, 논리적 모델링에서는 실제 필요한 모든 속성을 추출한다.
                예를 들어 개념적 모델링에서 고객의 이름, 주소, 전화번호만 추출아여도 실제 마케팅 업무에 사용하려면 나이, 성별 등의
                상세한 정보가 필요하므로 논리적 모델링에서 추출한다.
                2. 정규화 수행
                    - 여러 개체가 데이터를 중복 저장하는 문제를 해결하기 위해 정규화를 수행한다.
                3. 데이터의 표준화 수행
                    - 데이터 용어 사전과 도메인을 정의하여 동일하게 사용되는 용어를 정리하고 데이터의 형태 및 크기 등을 확정한다.
                
                - 물리적 모델링
                    - 물리적 모델링은 작성된 논리적 모델을 실제 컴퓨터 저장 장치에 저장하기 위해 데이터 타입과 길이 등 
                    물리적 구조를 정의하고 구현하는 과정이다. 물리적 모델링 시 DBMS의 특성에 맞게 저장 구조를 정의해야
                    데이터베이스가 최적의 성능을 낼 수 있다.
                    -물리적 모델링을 할 때 트랜잭션, 저장 공간 설계 측면에서 고려할 사항이다.
                    1. 응답시간을 최소화해야한다.
                        트랜잭션이 시작되어 종료될 때 까지 걸리는 시간을 응답시간이라 한다.
                        > 트랜잭션: 하나의 일의 단위
                    2. 얼마나 많은 트랜잭션을 동시에 발생시킬 수 있는 지 검토
                        데이터베이스가 얼마나 많은 토랜잭션을 동시에 발생시킬 수 있느냐는 시스템 전체 성능에 영향을 미친다.
                        따라서 트랜잭션을 효율적으로 분산시킬 수 있는 전략이 필요하다.
                    3. 데이터가 저장될 공간을 효율적으로 배치해야한다.
                        - DBMS에 따라 다양한 저장 방법이 있으므로 저장될 데이터의 특성을 파악하여 저장 방법을 결정한다.
                        또, 데이터의 사용 형태에 따라 검색을 위한 index를 설계하여 최적의 성능을 낼 수 있게 해야한다.

### 4. data modeler 실습
    1. madang서점의 논리적 모델링
        - madang서점은 출판사에서 도서를 공급받아 판매한다. 판매 내역은 매일 기록으로 남기며, 고객서비스와 매출 관리에 활용한다.
        마당서점의 요구사항은 다음과 같다.
            - 도서 목록에는 도서번호, 도서이름, 출판사이름, 단가를 기록 (개체)
            - 출판사 목록에는 출판사이름, 담당자이름, 전화번호를 기록 (개체)
            - 고객 목록에는 고객번호, 고객이름, 주소, 전화번호를 기록 (개체)
            - madang서점은 출판사에서 공급한 도서만 등록하여 관리한다.
            (출판사와 도서의 관계는 1:N)
            - 고객은 여러 번에 걸쳐 여러 권의 도서를 구입할 수 있다.
            (고객과 도서의 관계는 N:M)
            - madang서점은 고객이 도서를 구입한 날(주문일자)과 구매한 가격(주문금액)을 따로 저장한다.
            (고객과 도서의 관계에 속성이 존재)